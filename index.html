<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>Benim Portföyüm</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Roboto&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-XXXXXXXXXX"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-XXXXXXXXXX');
  </script>
  <style>
    html {
      scroll-behavior: smooth;
    }
    body {
      font-family: 'Roboto', Arial, sans-serif;
      margin: 0;
      min-height: 100vh;
      background: linear-gradient(120deg, #181a1b 60%, #23272a 100%);
      color: #eaeaea;
      transition: background 0.4s, color 0.4s;
    }
    body.light {
      background: linear-gradient(120deg, #f4f4f4 60%, #e0e7ef 100%);
      color: #23272a;
    }
    .navbar {
      width: 100%;
      background: #23272a;
      box-shadow: 0 2px 12px #0002;
      position: sticky;
      top: 0;
      z-index: 10;
      transition: background 0.3s;
    }
    body.light .navbar {
      background: #e0e7ef;
    }
    .navbar-inner {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0;
      padding: 0 24px;
      height: 60px;
    }
    .navbar-logo {
      margin-right: 24px;
      color: #7ee7f7;
      font-family: 'Montserrat', Arial, sans-serif;
      font-size: 1.3em;
      font-weight: bold;
      letter-spacing: 1px;
      text-shadow: none;
    }
    .navbar-menu {
      display: flex;
      gap: 32px;
      align-items: center;
    }
    .navbar-menu a, .navbar-menu .dropdown > a {
      padding: 0 12px;
      font-size: 1.08em;
      letter-spacing: 0.5px;
      transition: color 0.2s, background 0.2s;
      border-radius: 6px;
      line-height: 1.7;
      color: #fff !important;
      background: transparent;
      text-decoration: none;
    }
    .navbar-menu a.active, .navbar-menu a:hover, .navbar-menu .dropdown > a:hover {
      color: #7ee7f7 !important;
      background: #23272a;
    }
    .navbar-actions {
      display: flex;
      align-items: center;
      gap: 18px;
      margin-left: 32px;
    }
    .theme-toggle, .lang-toggle {
      background: transparent;
      color: #7ee7f7;
      border: none;
      border-radius: 50%;
      width: auto;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3em;
      box-shadow: none;
      transition: color 0.2s, transform 0.2s;
      cursor: pointer;
      padding: 0 8px;
    }
    .theme-toggle:hover, .lang-toggle:hover {
      color: #4db8c7;
      background: transparent;
      box-shadow: none;
      transform: scale(1.12);
    }
    .navbar-actions a {
      color: #7ee7f7;
      font-size: 1.3em;
      display: flex;
      align-items: center;
      gap: 4px;
      transition: color 0.2s;
      text-decoration: none;
      padding: 0 6px;
    }
    .navbar-actions a:hover {
      color: #4db8c7;
    }
    .settings-text {
      font-size: 1em;
      margin-left: 4px;
      font-weight: 500;
      letter-spacing: 0.2px;
    }
    .container {
      max-width: 900px;
      margin: 40px auto 0 auto;
      background: #23272acc;
      padding: 40px 30px 30px 30px;
      border-radius: 18px;
      box-shadow: 0 8px 32px 0 #7ee7f733;
      position: relative;
      z-index: 1;
      overflow: hidden;
      transition: background 0.4s;
    }
    body.light .container {
      background: #fff;
      box-shadow: 0 8px 32px 0 #b3eaff33;
    }
    .profile-img {
      width: 110px;
      height: 110px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid #7ee7f7;
      margin-bottom: 16px;
      box-shadow: 0 2px 16px #7ee7f7a0;
      background: #222;
      transition: box-shadow 0.3s;
    }
    h1 {
      font-family: 'Montserrat', Arial, sans-serif;
      color: #fff;
      font-size: 2.2em;
      margin-bottom: 8px;
      letter-spacing: 1px;
      transition: color 0.4s;
    }
    body.light h1 {
      color: #23272a;
    }
    .desc {
      color: #b3eaff;
      margin-bottom: 18px;
      font-size: 1.1em;
      transition: color 0.4s;
    }
    body.light .desc {
      color: #23272a;
    }
    .animated-welcome {
      font-size: 1.3em;
      font-weight: bold;
      color: #7ee7f7;
      margin-bottom: 18px;
      min-height: 32px;
      letter-spacing: 1px;
      animation: fadeIn 1.2s;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .cv-btn {
      display: inline-block;
      margin: 12px 0 18px 0;
      background: #7ee7f7;
      color: #181a1b;
      border: none;
      border-radius: 6px;
      padding: 10px 28px;
      font-size: 1.1em;
      font-family: 'Montserrat', Arial, sans-serif;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
      text-decoration: none;
      box-shadow: 0 2px 8px #7ee7f7a0;
    }
    .cv-btn:hover {
      background: #4db8c7;
      color: #fff;
    }
    .socials {
      margin-bottom: 18px;
      display: flex;
      justify-content: center;
      gap: 18px;
    }
    .socials a {
      color: #7ee7f7;
      font-size: 1.5em;
      transition: color 0.2s, transform 0.2s;
    }
    .socials a:hover {
      color: #4db8c7;
      transform: scale(1.2);
    }
    .section {
      display: none;
      animation: fadeIn 0.7s;
    }
    .section.active {
      display: block;
    }
    /* Hakkımda - Zaman Çizelgesi */
    .timeline {
      position: relative;
      max-width: 600px;
      margin: 30px auto 0 auto;
    }
    .timeline::before {
      content: '';
      position: absolute;
      left: 20px;
      top: 0;
      bottom: 0;
      width: 3px;
      background: #7ee7f7;
      border-radius: 2px;
      opacity: 0.4;
    }
    .timeline-item {
      position: relative;
      margin-bottom: 32px;
      padding-left: 50px;
    }
    .timeline-dot {
      position: absolute;
      left: 12px;
      top: 6px;
      width: 16px;
      height: 16px;
      background: #7ee7f7;
      border-radius: 50%;
      box-shadow: 0 0 12px #7ee7f7a0;
      border: 2px solid #23272a;
    }
    .timeline-content {
      background: #181a1b;
      padding: 12px 18px;
      border-radius: 8px;
      color: #eaeaea;
      box-shadow: 0 2px 8px #7ee7f720;
      font-size: 1em;
      transition: background 0.4s, color 0.4s;
    }
    body.light .timeline-content {
      background: #e0e7ef;
      color: #23272a;
    }
    /* Hobiler */
    .hobbies {
      margin: 32px auto 0 auto;
      max-width: 600px;
      display: flex;
      flex-wrap: wrap;
      gap: 18px;
      justify-content: center;
    }
    .hobby {
      background: #181a1b;
      color: #7ee7f7;
      border-radius: 8px;
      padding: 12px 18px;
      font-size: 1.1em;
      display: flex;
      align-items: center;
      gap: 10px;
      box-shadow: 0 2px 8px #7ee7f720;
      border: 1px solid #23272a;
      transition: box-shadow 0.2s, transform 0.2s, background 0.4s, color 0.4s;
    }
    .hobby i {
      font-size: 1.3em;
    }
    .hobby:hover {
      box-shadow: 0 4px 16px #7ee7f7a0;
      transform: scale(1.05);
    }
    body.light .hobby {
      background: #e0e7ef;
      color: #23272a;
    }
    /* Projeler */
    .projects {
      display: flex;
      flex-wrap: wrap;
      gap: 24px;
      justify-content: center;
      margin-top: 18px;
    }
    .project-card {
      background: #181a1b;
      border-radius: 12px;
      box-shadow: 0 2px 12px #7ee7f720;
      padding: 0 0 16px 0;
      width: 260px;
      text-align: left;
      border: 1.5px solid #23272a;
      transition: transform 0.2s, box-shadow 0.2s, border 0.2s;
      position: relative;
      z-index: 1;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      min-height: 340px;
    }
    .project-card:hover {
      transform: translateY(-8px) scale(1.03);
      box-shadow: 0 8px 24px #7ee7f7a0;
      border: 1.5px solid #7ee7f7;
    }
    .project-img {
      width: 100%;
      height: 140px;
      object-fit: cover;
      border-radius: 12px 12px 0 0;
      background: #23272a;
      border-bottom: 1px solid #23272a;
    }
    .project-title {
      font-weight: bold;
      font-size: 1.15em;
      color: #7ee7f7;
      margin: 12px 0 8px 0;
      letter-spacing: 1px;
      padding: 0 16px;
    }
    .project-desc {
      color: #b3eaff;
      font-size: 1em;
      padding: 0 16px;
      flex: 1;
    }
    .project-btn {
      margin: 12px 16px 0 16px;
      background: #7ee7f7;
      color: #181a1b;
      border: none;
      border-radius: 6px;
      padding: 8px 0;
      font-size: 1em;
      font-family: 'Montserrat', Arial, sans-serif;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
      width: 100%;
    }
    .project-btn:hover {
      background: #4db8c7;
      color: #fff;
    }
    /* Modal */
    .modal {
      display: none;
      position: fixed;
      z-index: 100;
      left: 0; top: 0; width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.7);
      align-items: center;
      justify-content: center;
      animation: fadeIn 0.3s;
    }
    .modal-content {
      background: #23272a;
      padding: 32px 24px;
      border-radius: 14px;
      max-width: 400px;
      color: #eaeaea;
      box-shadow: 0 4px 32px #7ee7f7a0;
      position: relative;
      text-align: center;
    }
    .modal-close {
      position: absolute;
      top: 12px; right: 18px;
      font-size: 1.5em;
      color: #7ee7f7;
      cursor: pointer;
      transition: color 0.2s;
    }
    .modal-close:hover {
      color: #fff;
    }
    /* İletişim */
    .contact-form {
      max-width: 400px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 14px;
    }
    .contact-form input, .contact-form textarea {
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #333;
      background: #181a1b;
      color: #eaeaea;
      font-size: 1em;
      resize: none;
    }
    .contact-form button {
      background: #7ee7f7;
      color: #181a1b;
      border: none;
      border-radius: 6px;
      padding: 10px 0;
      font-size: 1.1em;
      font-family: 'Montserrat', Arial, sans-serif;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
    }
    .contact-form button:hover {
      background: #4db8c7;
      color: #fff;
    }
    .form-success {
      color: #7ee7f7;
      margin-top: 10px;
      text-align: center;
      font-weight: bold;
      display: none;
    }
    /* Footer */
    footer {
      width: 100%;
      background: #23272a;
      color: #b3eaff;
      text-align: center;
      padding: 18px 0 10px 0;
      font-size: 1em;
      margin-top: 40px;
      letter-spacing: 1px;
      border-top: 1px solid #222;
    }
    /* Yukarı çık butonu */
    #toTop {
      position: fixed;
      bottom: 32px;
      right: 32px;
      background: #7ee7f7;
      color: #23272a;
      border: none;
      border-radius: 50%;
      width: 48px;
      height: 48px;
      font-size: 1.7em;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      box-shadow: 0 2px 12px #7ee7f7a0;
      z-index: 200;
      opacity: 0.8;
      transition: background 0.2s, color 0.2s, opacity 0.2s;
      display: none;
    }
    #toTop:hover {
      background: #4db8c7;
      color: #fff;
      opacity: 1;
    }
    @media (max-width: 700px) {
      .container { padding: 12px 2vw; }
      .projects { flex-direction: column; align-items: center; }
      .project-card { width: 95vw; max-width: 340px; }
      .navbar-inner { flex-direction: column; height: auto; gap: 8px; padding: 0 8px; }
      .navbar-menu { gap: 12px; }
      .timeline { padding-left: 0; }
    }
    @keyframes spin {
      0% { transform: rotate(0deg);}
      100% { transform: rotate(360deg);}
    }
    .splash {
      position: fixed; z-index: 99999; top: 0; left: 0; width: 100vw; height: 100vh;
      background: linear-gradient(120deg, #181a1b 60%, #23272a 100%);
      display: flex; align-items: center; justify-content: center;
      transition: opacity 0.7s;
    }
    .splash-inner {
      text-align: center;
      animation: fadeIn 1.2s;
    }
    .splash-logo {
      font-size: 3.5em;
      color: #7ee7f7;
      margin-bottom: 18px;
      animation: bounce 1.2s infinite alternate;
    }
    @keyframes bounce {
      to { transform: translateY(-18px);}
    }
    .splash-title {
      color: #fff;
      font-size: 2.2em;
      margin-bottom: 10px;
      letter-spacing: 1px;
      animation: fadeIn 1.2s;
    }
    .splash-desc {
      color: #f3f3f3;
      margin-bottom: 28px;
      font-size: 1.15em;
      animation: fadeIn 1.7s;
    }
    .splash-btn {
      background: #7ee7f7;
      color: #181a1b;
      font-size: 1.15em;
      padding: 12px 38px;
      border: none;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 2px 12px #7ee7f7a0;
      transition: background 0.2s, color 0.2s, transform 0.2s;
      animation: fadeIn 2s;
    }
    .splash-btn:hover {
      background: #4db8c7;
      color: #fff;
      transform: scale(1.07);
    }
    .dropdown {
      position: relative;
      display: inline-block;
    }
    .dropdown-content {
      display: none;
      position: absolute;
      background: #23272a;
      min-width: 170px;
      box-shadow: 0 8px 16px #0003;
      z-index: 100;
      border-radius: 8px;
      margin-top: 8px;
    }
    .dropdown.open .dropdown-content {
      display: block;
    }
    .dropdown-content a {
      color: #fff !important;
      padding: 10px 18px;
      text-decoration: none;
      display: block;
      transition: background 0.2s, color 0.2s;
    }
    .dropdown-content a:hover {
      background: #181a1b;
      color: #7ee7f7 !important;
    }
    .dropdown > a i {
      margin-left: 6px;
    }
    .account > a i.fas.fa-user-circle {
      margin-right: 4px;
    }
    .lang-btn, .theme-btn {
      background: #eafcff;
      color: #23272a;
      margin: 4px 2px 4px 0;
      padding: 8px 18px;
      border: none;
      border-radius: 6px;
      font-weight: bold;
      cursor: pointer;
      font-size: 1em;
      transition: box-shadow 0.2s, transform 0.2s, background 0.2s, color 0.2s;
      box-shadow: 0 2px 8px #7ee7f720;
    }
    .lang-btn:hover, .theme-btn:hover {
      background: #c2e9f7;
      color: #23272a;
      box-shadow: 0 4px 16px #7ee7f7a0;
      transform: scale(1.08);
    }
    /* Modern modal ve buton stilleri */
    #authModal, #settingsModal {
      display: none;
      position: fixed;
      z-index: 99999;
      top: 0; left: 0; width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.7);
      align-items: center;
      justify-content: center;
      animation: fadeIn 0.3s;
    }
    #authModal[style*="display: flex"], #settingsModal[style*="display: flex"] {
      display: flex !important;
    }
    #authBox, #settingsModal > div {
      background: #181a1b;
      color: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 12px #0008;
      padding: 28px 20px 20px 20px;
      max-width: 340px;
      width: 90vw;
      font-family: 'Roboto', Arial, sans-serif;
    }
    #authBox button, #settingsModal button, .lang-btn, .theme-btn {
      background: #7ee7f7;
      color: #23272a;
      border: none;
      border-radius: 8px;
      padding: 10px 20px;
      font-weight: bold;
      font-size: 1.1em;
      margin: 6px 0;
      cursor: pointer;
      transition: background 0.2s, color 0.2s, transform 0.2s;
      box-shadow: 0 2px 8px #7ee7f7a0;
    }
    #authBox button:hover, #settingsModal button:hover, .lang-btn:hover, .theme-btn:hover {
      background: #4db8c7;
      color: #fff;
      transform: scale(1.05);
    }
    #authBox input, #authBox input[type="password"] {
      width: 100%;
      margin-bottom: 14px;
      padding: 10px;
      border-radius: 6px;
      border: 1px solid #7ee7f7;
      background: #181a1b;
      color: #fff;
      font-size: 1em;
    }
    #authBox h2 {
      margin-top: 0;
      margin-bottom: 18px;
      font-size: 1.4em;
      color: #7ee7f7;
    }
    #authBox .modal-close, #settingsModal .modal-close {
      position: absolute;
      top: 10px; right: 16px;
      background: none;
      border: none;
      color: #7ee7f7;
      font-size: 1.5em;
      cursor: pointer;
      transition: color 0.2s;
    }
    #authBox .modal-close:hover, #settingsModal .modal-close:hover {
      color: #fff;
    }
    /* Ayarlar modalı için minimalist ve olgun stil */
    #settingsModal > div {
      background: #181a1b;
      color: #fff;
      border-radius: 8px;
      box-shadow: 0 2px 12px #0008;
      padding: 28px 20px 20px 20px;
      max-width: 340px;
      width: 90vw;
      font-family: 'Roboto', Arial, sans-serif;
    }
    #settingsModal h2 {
      font-size: 1.15em;
      color: #fff;
      margin-bottom: 18px;
      font-weight: 600;
      letter-spacing: 0.5px;
    }
    .settings-group {
      margin-bottom: 18px;
    }
    .settings-label {
      font-size: 0.98em;
      color: #bfcad6;
      margin-bottom: 7px;
      font-weight: 500;
      letter-spacing: 0.2px;
      display: block;
    }
    .settings-options {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    .settings-btn {
      background: #fff;
      color: #23272a;
      border: 1px solid #eaeaea;
      border-radius: 4px;
      padding: 6px 14px;
      font-size: 0.98em;
      font-weight: 400;
      cursor: pointer;
      transition: background 0.15s, color 0.15s, border 0.15s;
      outline: none;
    }
    .settings-btn.selected, .settings-btn:active {
      border: 1.5px solid #4a90a4;
      background: #4a90a4;
      color: #fff;
    }
    .settings-btn:hover {
      background: #4a90a4;
      color: #fff;
    }
    /* Account dropdown */
    .navbar-menu .dropdown {
      position: relative;
      display: inline-block;
    }
    .navbar-menu .dropdown > a {
      color: #fff !important;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 4px;
      padding: 0 12px;
      border-radius: 6px;
      transition: color 0.2s, background 0.2s;
    }
    .navbar-menu .dropdown > a:hover {
      color: #7ee7f7 !important;
      background: #23272a;
    }
    .navbar-menu .dropdown-content {
      display: none;
      position: absolute;
      right: 0;
      background: #23272a;
      min-width: 170px;
      box-shadow: 0 8px 16px #0003;
      z-index: 100;
      border-radius: 8px;
      margin-top: 8px;
      padding: 8px 0;
    }
    .navbar-menu .dropdown.open .dropdown-content {
      display: block;
    }
    .navbar-menu .dropdown-content a {
      color: #fff !important;
      padding: 10px 18px;
      text-decoration: none;
      display: block;
      transition: background 0.2s, color 0.2s;
      border-radius: 0;
      background: transparent;
    }
    .navbar-menu .dropdown-content a:hover {
      background: #181a1b;
      color: #7ee7f7 !important;
    }
    /* Floating Chat Widget */
    #chatBtn {
      position: fixed;
      bottom: 32px;
      right: 32px;
      width: 60px;
      height: 60px;
      background: #7ee7f7;
      color: #23272a;
      border-radius: 50%;
      box-shadow: 0 2px 12px #7ee7f7a0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2em;
      cursor: pointer;
      z-index: 300;
      transition: background 0.2s, color 0.2s, transform 0.2s;
      border: none;
    }
    #chatBtn:hover {
      background: #4db8c7;
      color: #fff;
      transform: scale(1.08);
    }
    #chatWidget {
      position: fixed;
      bottom: 100px;
      right: 32px;
      width: 320px;
      background: #23272a;
      color: #eaeaea;
      border-radius: 16px;
      box-shadow: 0 4px 32px #7ee7f7a0;
      z-index: 301;
      display: none;
      flex-direction: column;
      padding: 0;
      overflow: hidden;
      transition: box-shadow 0.2s;
    }
    body.light #chatWidget {
      background: #fff;
      color: #23272a;
      box-shadow: 0 4px 32px #b3eaffa0;
    }
    #chatHeader {
      background: #23272a;
      color: #eaeaea;
      padding: 14px 18px;
      font-weight: bold;
      font-size: 1.1em;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid #333;
    }
    #chatHeader .admin-icon {
      margin-left: 8px;
      color: #b3eaff;
      font-size: 1.1em;
      cursor: pointer;
      transition: color 0.2s;
    }
    #chatHeader .admin-icon:hover {
      color: #7ee7f7;
    }
    #chatClose {
      background: none;
      border: none;
      color: #23272a;
      font-size: 1.3em;
      cursor: pointer;
      transition: color 0.2s;
    }
    #chatClose:hover {
      color: #4db8c7;
    }
    #chatForm {
      display: flex;
      flex-direction: column;
      gap: 10px;
      padding: 18px 18px 10px 18px;
    }
    #chatForm input, #chatForm textarea {
      padding: 8px 10px;
      border-radius: 6px;
      border: 1px solid #444;
      background: #23272a;
      color: #eaeaea;
      font-size: 1em;
      resize: none;
    }
    body.light #chatForm input, body.light #chatForm textarea {
      background: #f4f4f4;
      color: #23272a;
      border: 1px solid #b3eaff;
    }
    #chatForm button {
      background: #444;
      color: #eaeaea;
      border: none;
      border-radius: 6px;
      padding: 10px 0;
      font-size: 1.05em;
      font-family: 'Montserrat', Arial, sans-serif;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
    }
    #chatForm button:hover {
      background: #7ee7f7;
      color: #23272a;
    }
    #chatStatus {
      color: #b3eaff;
    }
    #chatSuccess {
      color: #7ee7f7;
    }
    /* Admin mesaj paneli */
    #adminMsgPanel {
      display: none;
      position: fixed;
      bottom: 110px;
      right: 370px;
      width: 540px;
      max-height: 440px;
      background: #23272a;
      color: #eaeaea;
      border-radius: 16px;
      box-shadow: 0 4px 32px #7ee7f7a0;
      z-index: 302;
      flex-direction: row;
      padding: 0;
      overflow: hidden;
    }
    body.light #adminMsgPanel {
      background: #fff;
      color: #23272a;
      box-shadow: 0 4px 32px #b3eaffa0;
    }
    #adminMsgHeader {
      background: #23272a;
      color: #eaeaea;
      padding: 14px 18px;
      font-weight: bold;
      font-size: 1.1em;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid #333;
    }
    #adminMsgClose {
      background: none;
      border: none;
      color: #eaeaea;
      font-size: 1.3em;
      cursor: pointer;
      transition: color 0.2s;
    }
    #adminMsgClose:hover {
      color: #7ee7f7;
    }
    #adminMsgList {
      padding: 12px 18px;
      max-height: 320px;
      overflow-y: auto;
      font-size: 0.98em;
    }
    .admin-msg-item {
      border-bottom: 1px solid #333;
      padding: 8px 0;
    }
    .admin-msg-item:last-child {
      border-bottom: none;
    }
    .admin-msg-name {
      font-weight: bold;
      color: #7ee7f7;
      font-size: 1em;
    }
    .admin-msg-date {
      color: #b3eaff;
      font-size: 0.92em;
      margin-left: 6px;
    }
    .admin-msg-text {
      margin-top: 2px;
      color: #eaeaea;
      font-size: 0.98em;
    }
    /* Sohbet balonları */
    .chat-messages {
      max-height: 180px;
      overflow-y: auto;
      margin-bottom: 10px;
      padding-right: 2px;
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    .chat-bubble {
      display: inline-block;
      padding: 8px 14px;
      border-radius: 16px;
      font-size: 1em;
      max-width: 80%;
      word-break: break-word;
      margin-bottom: 2px;
    }
    .chat-bubble.user {
      background: #444;
      color: #fff;
      align-self: flex-end;
      border-bottom-right-radius: 4px;
    }
    .chat-bubble.admin {
      background: #7ee7f7;
      color: #23272a;
      align-self: flex-start;
      border-bottom-left-radius: 4px;
    }
    .chat-bubble.time {
      background: none;
      color: #b3eaff;
      font-size: 0.92em;
      text-align: center;
      margin: 0 auto 2px auto;
      padding: 0;
    }
    /* Admin paneli için sohbet */
    .admin-chat-block {
      border-bottom: 1px solid #333;
      padding: 10px 0 14px 0;
      margin-bottom: 0;
    }
    .admin-chat-title {
      font-weight: bold;
      color: #7ee7f7;
      font-size: 1em;
      margin-bottom: 4px;
    }
    .admin-chat-messages {
      background: #23272a;
      border-radius: 8px;
      padding: 8px 10px;
      margin-bottom: 6px;
      max-height: 90px;
      overflow-y: auto;
      font-size: 0.98em;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .admin-chat-bubble.user {
      background: #444;
      color: #fff;
      align-self: flex-end;
      border-radius: 12px 12px 4px 12px;
      padding: 6px 10px;
      margin-bottom: 2px;
      max-width: 80%;
    }
    .admin-chat-bubble.admin {
      background: #7ee7f7;
      color: #23272a;
      align-self: flex-start;
      border-radius: 12px 12px 12px 4px;
      padding: 6px 10px;
      margin-bottom: 2px;
      max-width: 80%;
    }
    .admin-chat-reply {
      display: flex;
      gap: 6px;
      margin-top: 4px;
    }
    .admin-chat-reply input {
      flex: 1;
      padding: 6px 10px;
      border-radius: 6px;
      border: 1px solid #444;
      background: #23272a;
      color: #eaeaea;
      font-size: 1em;
    }
    .admin-chat-reply button {
      background: #7ee7f7;
      color: #23272a;
      border: none;
      border-radius: 6px;
      padding: 6px 14px;
      font-size: 1em;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
    }
    .admin-chat-reply button:hover {
      background: #4db8c7;
      color: #fff;
    }
    /* Gelişmiş Admin Chat Paneli */
    .admin-users-list {
      width: 160px;
      background: #181a1b;
      border-right: 1px solid #333;
      height: 100%;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
    }
    .admin-user-item {
      padding: 12px 14px;
      border-bottom: 1px solid #23272a;
      cursor: pointer;
      color: #b3eaff;
      font-size: 1em;
      transition: background 0.15s, color 0.15s;
    }
    .admin-user-item.selected, .admin-user-item:hover {
      background: #23272a;
      color: #7ee7f7;
    }
    .admin-chat-area {
      flex: 1;
      display: flex;
      flex-direction: column;
      height: 100%;
      padding: 0;
    }
    .admin-chat-header {
      background: #23272a;
      color: #eaeaea;
      padding: 14px 18px;
      font-weight: bold;
      font-size: 1.1em;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid #333;
    }
    .admin-chat-messages {
      background: #23272a;
      border-radius: 0 0 0 0;
      padding: 12px 18px 8px 18px;
      flex: 1;
      max-height: 220px;
      overflow-y: auto;
      font-size: 0.98em;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .admin-chat-reply {
      display: flex;
      gap: 6px;
      padding: 10px 18px 14px 18px;
      border-top: 1px solid #333;
      background: #23272a;
    }
    .admin-chat-reply input {
      flex: 1;
      padding: 6px 10px;
      border-radius: 6px;
      border: 1px solid #444;
      background: #181a1b;
      color: #eaeaea;
      font-size: 1em;
    }
    .admin-chat-reply button {
      background: #7ee7f7;
      color: #23272a;
      border: none;
      border-radius: 6px;
      padding: 6px 14px;
      font-size: 1em;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
    }
    .admin-chat-reply button:hover {
      background: #4db8c7;
      color: #fff;
    }
    /* Admin paneli sohbet silme özellikleri */
    .admin-panel-actions {
      padding: 10px 10px 0 10px;
      background: #181a1b;
      border-bottom: 1px solid #23272a;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
    }
    .admin-panel-actions button {
      background: #444;
      color: #eaeaea;
      border: none;
      border-radius: 6px;
      padding: 6px 12px;
      font-size: 0.98em;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
    }
    .admin-panel-actions button:hover {
      background: #7ee7f7;
      color: #23272a;
    }
    .admin-chat-header .delete-chat-btn {
      background: #e74c3c;
      color: #fff;
      border: none;
      border-radius: 6px;
      padding: 4px 10px;
      font-size: 0.97em;
      font-weight: bold;
      margin-left: 10px;
      cursor: pointer;
      transition: background 0.2s, color 0.2s;
    }
    .admin-chat-header .delete-chat-btn:hover {
      background: #c0392b;
      color: #fff;
    }
    /* Chat Bildirimleri */
    #chatNotif {
      position: fixed;
      bottom: 110px;
      right: 38px;
      background: #23272a;
      color: #fff;
      border-radius: 12px;
      box-shadow: 0 2px 16px #7ee7f7a0;
      padding: 14px 22px;
      font-size: 1.08em;
      font-weight: bold;
      z-index: 99999;
      display: none;
      align-items: center;
      gap: 10px;
      animation: notifFadeIn 0.5s;
      cursor: pointer;
    }
    @keyframes notifFadeIn {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    #chatNotif .notif-dot {
      width: 12px; height: 12px; background: #e74c3c; border-radius: 50%; display: inline-block; margin-right: 8px;
    }
    /* Admin iconunda kırmızı nokta */
    .admin-icon-badge {
      position: absolute;
      top: 2px; right: -2px;
      width: 11px; height: 11px;
      background: #e74c3c;
      border-radius: 50%;
      border: 2px solid #23272a;
      z-index: 10;
      display: block;
    }
    /* Kullanıcı listesinde yeni mesaj etiketi */
    .admin-user-item .new-msg-badge {
      background: #e74c3c;
      color: #fff;
      font-size: 0.82em;
      border-radius: 8px;
      padding: 2px 7px;
      margin-left: 6px;
      font-weight: bold;
      vertical-align: middle;
    }
  </style>
  <script defer src='https://static.cloudflareinsights.com/beacon.min.js' data-cf-beacon='{"token": "SENIN_TOKENIN"}'></script>
</head>
<body>
  <nav class="navbar">
    <div class="navbar-inner">
      <div class="navbar-logo">Portföyüm</div>
      <div class="navbar-menu">
        <a href="#" class="active" onclick="showSection('home', event)">Anasayfa</a>
        <a href="#" onclick="showSection('about', event)">Hakkımda</a>
        <a href="#" onclick="showSection('projects', event)">Projeler</a>
        <a href="#" onclick="showSection('contact', event)">İletişim</a>
      </div>
      <div class="navbar-actions">
        <button class="theme-toggle" id="themeToggle" title="Tema Değiştir"><i class="fas fa-moon"></i></button>
        <button class="lang-toggle" id="langToggle" title="Dili Değiştir"></button>
        <a href="#" onclick="openSettings()" title="Ayarlar" id="settingsBtn"><i class="fas fa-cog"></i> <span class="settings-text">Ayarlar</span></a>
        <a href="https://github.com/kullaniciadiniz" target="_blank" title="GitHub"><i class="fab fa-github"></i></a>
        <a href="https://linkedin.com/in/kullaniciadiniz" target="_blank" title="LinkedIn"><i class="fab fa-linkedin"></i></a>
      </div>
    </div>
  </nav>
  <div class="container">
    <!-- Anasayfa -->
    <section id="home" class="section active">
      <img src="https://i.imgur.com/6VBx3io.png" alt="Profil Fotoğrafı" class="profile-img">
      <div class="animated-welcome" id="animatedWelcome"></div>
      <h1>Benim Portföyüm</h1>
      <div class="desc">Merhaba! Benim adım <b>anıl</b>. Bu sitede projelerimi ve hayat hikayemi paylaşıyorum.</div>
      <div class="socials">
        <a href="#" title="GitHub"><i class="fab fa-github"></i></a>
      </div>
      <div id="visitorCounter" style="margin-top:18px; color:#7ee7f7; font-weight:bold; font-size:1.1em;"></div>
    </section>
    <!-- Hakkımda -->
    <section id="about" class="section">
      <h1>Hakkımda</h1>
      <div id="about-section">
        <h2 id="about-name"></h2>
        <p id="about-bio"></p>
      </div>
      <div class="timeline">
        <div class="timeline-item">
          <div class="timeline-dot"></div>
          <div class="timeline-content">Yakında...</div>
        </div>
        <div class="timeline-item">
          <div class="timeline-dot"></div>
          <div class="timeline-content">Yakında...</div>
        </div>
        <div class="timeline-item">
          <div class="timeline-dot"></div>
          <div class="timeline-content">Yakında...</div>
        </div>
      </div>
      <div class="hobbies">
        <div class="hobby"><i class="fas fa-gamepad"></i> Oyun Oynamak</div>
        <div class="hobby"><i class="fas fa-music"></i> Müzik Dinlemek</div>
        <div class="hobby"><i class="fas fa-camera"></i> Fotoğrafçılık</div>
        <div class="hobby"><i class="fas fa-bicycle"></i> Bisiklet Sürmek</div>
        <!-- Yeni hobiler ekleyebilirsin -->
      </div>
    </section>
    <!-- Projeler -->
    <section id="projects" class="section">
      <h1>Projeler</h1>
      <input type="text" id="projectSearch" placeholder="Projelerde ara..." style="width:100%;max-width:340px;margin:0 auto 18px auto;display:block;padding:8px 12px;border-radius:6px;border:1px solid #333;background:#181a1b;color:#eaeaea;">
      <div class="projects" id="projectsList">
        <div class="project-card">
          <img src="https://images.unsplash.com/photo-1461749280684-dccba630e2f6?auto=format&fit=crop&w=400&q=80" class="project-img" alt="Yakında">
          <div class="project-title">Yakında</div>
          <div class="project-desc">Yakında...</div>
          <button class="project-btn" onclick="showProjectModal(0)">Detay</button>
        </div>
        <div class="project-card">
          <img src="https://images.unsplash.com/photo-1519125323398-675f0ddb6308?auto=format&fit=crop&w=400&q=80" class="project-img" alt="Yakında">
          <div class="project-title">Yakında</div>
          <div class="project-desc">Yakında...</div>
          <button class="project-btn" onclick="showProjectModal(1)">Detay</button>
        </div>
        <!-- Yeni projeler eklemek için yukarıdaki gibi kopyala-yapıştır yapabilirsin -->
      </div>
    </section>
    <!-- İletişim -->
    <section id="contact" class="section">
      <h1>İletişim</h1>
      <form class="contact-form" id="contactForm" action="https://formspree.io/f/mldbnjrl" method="POST">
        <input type="text" name="name" placeholder="Adınız" required>
        <input type="email" name="email" placeholder="E-posta" required>
        <textarea name="message" rows="5" placeholder="Mesajınız" required></textarea>
        <button type="submit">Gönder</button>
        <div class="form-success" id="formSuccess" style="display:none;">
          <span id="successCheck" style="display:inline-block;font-size:2em;color:#7ee7f7;vertical-align:middle;">✔</span>
          <span style="margin-left:8px;">Mesajınız gönderildi! Teşekkürler.</span>
        </div>
      </form>
    </section>
  </div>
  <!-- Modal -->
  <div class="modal" id="modal">
    <div class="modal-content">
      <span class="modal-close" onclick="closeModal()">&times;</span>
      <h2 id="modalTitle"></h2>
      <div id="modalBody"></div>
    </div>
  </div>
  <!-- Yukarı çık butonu -->
  <button id="toTop" onclick="window.scrollTo({top:0,behavior:'smooth'})"><i class="fas fa-arrow-up"></i></button>
  <footer>
    &copy; 2024 anıl | Tüm hakları saklıdır.
  </footer>
  <div id="adminBtn" style="position:fixed;bottom:20px;left:20px;z-index:9999;opacity:0.2;cursor:pointer;font-size:1.5em;user-select:none;">⚙️</div>
  <div id="adminPanel" style="display:none;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#23272a;color:#fff;padding:32px 28px 24px 28px;border-radius:16px;box-shadow:0 4px 32px #7ee7f7a0;z-index:10000;min-width:320px;max-width:90vw;">
    <div style="text-align:right;margin-top:-18px;margin-bottom:8px;">
      <button onclick="closeAdmin()" style="background:none;border:none;color:#7ee7f7;font-size:1.5em;cursor:pointer;">&times;</button>
    </div>
    <h2 style="margin-top:0;">Admin Paneli</h2>
    <div><b>Ziyaretçi Sayısı:</b> <span id="adminVisitorCount"></span></div>
    <div style="margin-top:18px;">
      <b>Gizli Notlar:</b><br>
      <textarea id="adminNotes" style="width:100%;height:80px;margin-top:6px;border-radius:6px;padding:8px;background:#181a1b;color:#fff;border:1px solid #7ee7f7;"></textarea>
      <button onclick="saveNotes()" style="margin-top:8px;background:#7ee7f7;color:#23272a;border:none;border-radius:6px;padding:8px 18px;font-weight:bold;cursor:pointer;">Kaydet</button>
      <span id="notesSaved" style="color:#7ee7f7;display:none;margin-left:10px;">Kaydedildi!</span>
    </div>
    <div style="margin-top:24px;">
      <b>IP ve Konum Bilgileri:</b>
      <div id="ipInfoBox" style="background:#181a1b;padding:10px 14px;border-radius:8px;margin-top:8px;font-size:0.98em;line-height:1.7;border:1px solid #7ee7f7;word-break:break-all;"></div>
      <button onclick="getIpInfo()" style="margin-top:8px;background:#7ee7f7;color:#23272a;border:none;border-radius:6px;padding:6px 16px;font-weight:bold;cursor:pointer;">Bilgileri Güncelle</button>
      <div style="margin-top:14px;color:#b3eaff;font-size:0.97em;">Not: Statik sitelerde tüm ziyaretçilerin IP adreslerini toplamak mümkün değildir. Burada sadece kendi IP ve konum bilginiz gösterilir.</div>
    </div>
  </div>
  <div id="splashScreen" class="splash">
    <div class="splash-inner">
      <div class="splash-logo">
        <i class="fas fa-rocket"></i>
      </div>
      <h1 class="splash-title">Portföyüme Hoş Geldin!</h1>
      <p class="splash-desc">Hazır mısın? Keşfetmeye başla!</p>
      <button id="splashBtn" class="splash-btn">Keşfet</button>
    </div>
  </div>
  <div id="settingsModal" style="display:none;position:fixed;z-index:99999;top:0;left:0;width:100vw;height:100vh;background:rgba(0,0,0,0.7);align-items:center;justify-content:center;">
    <div>
      <button onclick="closeSettings()" style="position:absolute;top:10px;right:16px;background:none;border:none;color:#bfcad6;font-size:1.3em;cursor:pointer;">&times;</button>
      <h2>Ayarlar</h2>
      <!-- Ayar seçenekleri kaldırıldı -->
    </div>
  </div>
  <div id="hamburgerMenu" style="display:none;position:relative;"></div>
  <button id="chatBtn" title="Mesaj Gönder"><i class="fas fa-comment-dots"></i></button>
  <div id="chatWidget">
    <div id="chatHeader">
      <span id="chatHeaderTitle">Mesaj Gönder</span>
      <button id="chatClose" title="Kapat">&times;</button>
    </div>
    <div id="chatMessages" class="chat-messages"></div>
    <form id="chatForm" autocomplete="off">
      <div id="chatStatus">Çevrimiçi ise cevap verir</div>
      <input type="text" id="chatName" name="chatName" placeholder="Adınız" maxlength="32" required>
      <textarea id="chatMsg" name="chatMsg" rows="3" placeholder="Mesajınız" maxlength="300" required></textarea>
      <button type="submit">Gönder</button>
      <div id="chatSuccess">Mesajınız gönderildi! Teşekkürler.</div>
    </form>
  </div>
  <!-- Chat widget admin paneli -->
  <div id="adminMsgPanel">
    <div style="display:flex;flex-direction:column;width:160px;height:100%;">
      <div class="admin-panel-actions">
        <button id="clearAllChatsBtn" title="Tüm sohbetleri sil">Tüm Sohbetleri Temizle</button>
      </div>
      <div class="admin-users-list" id="adminUsersList" style="flex:1 1 auto;"></div>
    </div>
    <div class="admin-chat-area">
      <div class="admin-chat-header">
        <span id="adminChatHeader">Sohbet</span>
        <div>
          <button id="deleteChatBtn" class="delete-chat-btn" title="Bu sohbeti sil">Sohbeti Sil</button>
          <button id="adminMsgClose" title="Kapat">&times;</button>
        </div>
      </div>
      <div class="admin-chat-messages" id="adminChatMessages"></div>
      <form class="admin-chat-reply" id="adminChatReplyForm" style="display:none;">
        <input type="text" id="adminReplyInput" placeholder="Cevabınız..." maxlength="300" required>
        <button type="submit">Gönder</button>
      </form>
    </div>
  </div>
  <!-- Chat Bildirimleri -->
  <div id="chatNotif"><span class="notif-dot"></span><span id="chatNotifText">Yeni mesajınız var!</span></div>
  <script>
    // Menüden bölümler arası geçiş
    function showSection(id, e) {
      if (e) e.preventDefault();
      document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      document.querySelectorAll('.navbar-menu a').forEach(a => a.classList.remove('active'));
      const menuLinks = document.querySelectorAll('.navbar-menu a');
      if (id === 'home') menuLinks[0].classList.add('active');
      if (id === 'about') menuLinks[1].classList.add('active');
      if (id === 'projects') menuLinks[2].classList.add('active');
      if (id === 'contact') menuLinks[3].classList.add('active');
    }
    // Modal açma
    function openModal(title, body) {
      document.getElementById('modalTitle').innerText = title;
      document.getElementById('modalBody').innerText = body;
      document.getElementById('modal').style.display = 'flex';
    }
    function closeModal() {
      document.getElementById('modal').style.display = 'none';
    }
    window.onclick = function(event) {
      if (event.target === document.getElementById('modal')) {
        closeModal();
      }
    }
    // Yukarı çık butonu
    const toTop = document.getElementById('toTop');
    window.addEventListener('scroll', function() {
      if (window.scrollY > 300) {
        toTop.style.display = 'flex';
      } else {
        toTop.style.display = 'none';
      }
    });
    // DİL SEÇİMİ
    const translations = {
      tr: {
        home: "Anasayfa", about: "Hakkımda", projectsMenu: "Projeler", contact: "İletişim",
        welcome: "Hoş geldin!", desc: "Merhaba! Benim adım <b>anıl</b>. Bu sitede projelerimi ve hayat hikayemi paylaşıyorum.",
        visitor: (count) => `Bu site ${count} kez ziyaret edildi.`,
        welcomeTexts: ["Hoş geldin!", "Portföyüme göz at!", "Projelerimi incele!", "Bana ulaşabilirsin!"],
        aboutTitle: "Hakkımda", aboutName: "Anıl", aboutBio: "Yazılım ve teknolojiye meraklı bir lise öğrencisiyim.",
        timeline: [
          "2020 - Yazılıma ilgim başladı",
          "2024 - Liseye geçtim",
          "2025 - Yazılımla ilgili projeler yapmaya başladım"
        ],
        projectsTitle: "Projeler",
        contactTitle: "İletişim",
        hobbies: ["Oyun Oynamak", "Müzik Dinlemek", "Fotoğrafçılık", "Bisiklet Sürmek"],
        projects: [
          {title: "Yakında", desc: "Yakında...", btn: "Detay", modalTitle: "Yakında", modalBody: "Bu proje çok yakında burada olacak!"},
          {title: "Yakında", desc: "Yakında...", btn: "Detay", modalTitle: "Yakında", modalBody: "Bu proje çok yakında burada olacak!"}
        ],
        theme: "Tema",
        language: "Türkçe",
        projectSearch: "Projelerde ara...",
        contactName: "Adınız",
        contactEmail: "E-posta",
        contactMsg: "Mesajınız",
        contactBtn: "Gönder",
        contactSuccess: "Mesajınız gönderildi! Teşekkürler.",
        settings: "Ayarlar"
      },
      en: {
        home: "Home", about: "About", projectsMenu: "Projects", contact: "Contact",
        welcome: "Welcome!", desc: "Hi! My name is <b>Anıl</b>. Here I share my projects and life story.",
        visitor: (count) => `This site has been visited ${count} times.`,
        welcomeTexts: ["Welcome!", "Check out my portfolio!", "See my projects!", "You can contact me!"],
        aboutTitle: "About", aboutName: "Anıl", aboutBio: "I'm a high school student interested in software and technology.",
        timeline: [
          "2020 - Became interested in software",
          "2024 - Started high school",
          "2025 - Started developing software projects"
        ],
        projectsTitle: "Projects",
        contactTitle: "Contact",
        hobbies: ["Playing Games", "Listening to Music", "Photography", "Cycling"],
        projects: [
          {title: "Coming Soon", desc: "Coming soon...", btn: "Details", modalTitle: "Coming Soon", modalBody: "This project will be here very soon!"},
          {title: "Coming Soon", desc: "Coming soon...", btn: "Details", modalTitle: "Coming Soon", modalBody: "This project will be here very soon!"}
        ],
        theme: "Theme",
        language: "English",
        projectSearch: "Search projects...",
        contactName: "Your Name",
        contactEmail: "Email",
        contactMsg: "Your Message",
        contactBtn: "Send",
        contactSuccess: "Your message has been sent! Thank you.",
        settings: "Settings"
      }
    };

    let welcomeTexts = translations['tr'].welcomeTexts;
    let welcomeIndex = 0;
    let welcomeInterval = null;

    function setLang(lang) {
      localStorage.setItem('lang', lang);
      const t = translations[lang] || translations['tr'];
      document.querySelector('.navbar-menu a[onclick*="home"]').textContent = t.home;
      document.querySelector('.navbar-menu a[onclick*="about"]').textContent = t.about;
      document.querySelector('.navbar-menu a[onclick*="projects"]').textContent = t.projectsMenu;
      document.querySelector('.navbar-menu a[onclick*="contact"]').textContent = t.contact;
      document.getElementById('animatedWelcome').textContent = t.welcome;
      document.querySelector('.desc').innerHTML = t.desc;
      refreshVisitorCounterText();
      welcomeTexts = t.welcomeTexts;
      welcomeIndex = 0;
      if (welcomeInterval) clearInterval(welcomeInterval);
      animateWelcome();
      document.getElementById('settingsBtn').innerHTML = `<i class="fas fa-cog"></i> <span class="settings-text">${t.settings}</span>`;
      document.querySelector('#settingsModal h2').textContent = t.settings;
      document.querySelectorAll('.settings-label').forEach(function(el, i){
        if(i === 0) el.textContent = t.language;
        if(i === 1) el.textContent = t.theme;
      });
      document.querySelector('#about h1').textContent = t.aboutTitle;
      document.getElementById('about-name').textContent = t.aboutName;
      document.getElementById('about-bio').textContent = t.aboutBio;
      document.querySelector('#projects h1').textContent = t.projectsTitle;
      document.getElementById('projectSearch').placeholder = t.projectSearch;
      const projectTitles = document.querySelectorAll('.project-title');
      const projectDescs = document.querySelectorAll('.project-desc');
      const projectBtns = document.querySelectorAll('.project-btn');
      t.projects.forEach((proj, i) => {
        if (projectTitles[i]) projectTitles[i].textContent = proj.title;
        if (projectDescs[i]) projectDescs[i].textContent = proj.desc;
        if (projectBtns[i]) projectBtns[i].textContent = proj.btn;
      });
      document.querySelector('#contact h1').textContent = t.contactTitle;
      const contactForm = document.getElementById('contactForm');
      if(contactForm) {
        contactForm.querySelector('input[name="name"]').placeholder = t.contactName;
        contactForm.querySelector('input[name="email"]').placeholder = t.contactEmail;
        contactForm.querySelector('textarea[name="message"]').placeholder = t.contactMsg;
        contactForm.querySelector('button[type="submit"]').textContent = t.contactBtn;
        contactForm.addEventListener('submit', function(e) {
          setTimeout(function() {
            contactForm.reset();
            const formSuccess = document.getElementById('formSuccess');
            if(formSuccess) {
              formSuccess.style.display = 'block';
              formSuccess.style.background = '#23272a';
              formSuccess.style.borderRadius = '8px';
              formSuccess.style.padding = '10px 0';
              setTimeout(function(){ formSuccess.style.display = 'none'; }, 3500);
            }
          }, 1000);
        });
      }
      // Timeline kutularını güncelle
      const timelineEls = document.querySelectorAll('.timeline-content');
      t.timeline.forEach((item, i) => {
        if (timelineEls[i]) timelineEls[i].textContent = item;
      });
      // Hobiler
      const hobbyEls = document.querySelectorAll('.hobby');
      t.hobbies.forEach((hobby, i) => {
        if (hobbyEls[i]) {
          const icon = hobbyEls[i].querySelector('i');
          if (icon) {
            hobbyEls[i].innerHTML = icon.outerHTML + ' ' + hobby;
          } else {
            hobbyEls[i].textContent = hobby;
          }
        }
      });
    }

    function loadLang() {
      const lang = localStorage.getItem('lang') || 'tr';
      setLang(lang);
    }

    // Ziyaretçi sayacı (localStorage ile basit demo)
    function updateVisitorCounter() {
      let count = localStorage.getItem('visitorCount') || 0;
      count++;
      localStorage.setItem('visitorCount', count);
      refreshVisitorCounterText();
    }
    function refreshVisitorCounterText() {
      let count = localStorage.getItem('visitorCount') || 0;
      const lang = localStorage.getItem('lang') || 'tr';
      document.getElementById('visitorCounter').textContent = translations[lang].visitor(count);
    }

    // Animasyonlu hoş geldin yazısı
    function animateWelcome() {
      const el = document.getElementById('animatedWelcome');
      el.textContent = welcomeTexts[welcomeIndex];
      welcomeIndex = (welcomeIndex + 1) % welcomeTexts.length;
      welcomeInterval = setTimeout(animateWelcome, 2200);
    }
    // --- Admin Paneli ---
    const adminBtn = document.getElementById('adminBtn');
    const adminPanel = document.getElementById('adminPanel');
    let adminUnlocked = false;
    adminBtn.addEventListener('click', openAdminPrompt);
    // Klavye kısayolu: Ctrl+Shift+A ile açılır
    document.addEventListener('keydown', function(e) {
      if (e.ctrlKey && e.shiftKey && e.key.toLowerCase() === 'a') {
        openAdminPrompt();
      }
    });
    function openAdminPrompt() {
      if (adminUnlocked) { showAdmin(); return; }
      const pass = prompt('Admin paneline erişmek için şifre girin:');
      if (pass === 'anil123') { // Şifreni buradan değiştirebilirsin
        adminUnlocked = true;
        showAdmin();
      } else if(pass !== null) {
        alert('Yanlış şifre!');
      }
    }
    function showAdmin() {
      adminPanel.style.display = 'block';
      document.getElementById('adminVisitorCount').textContent = localStorage.getItem('visitorCount') || 0;
      document.getElementById('adminNotes').value = localStorage.getItem('adminNotes') || '';
      getIpInfo();
    }
    function closeAdmin() {
      adminPanel.style.display = 'none';
    }
    function saveNotes() {
      localStorage.setItem('adminNotes', document.getElementById('adminNotes').value);
      const saved = document.getElementById('notesSaved');
      saved.style.display = 'inline';
      setTimeout(()=>{saved.style.display='none';}, 1200);
    }
    // IP ve konum bilgisi çekme
    function getIpInfo() {
      const box = document.getElementById('ipInfoBox');
      box.textContent = 'Yükleniyor...';
      fetch('https://ipinfo.io/json?token=6e3e6e0e2e2b2c')
        .then(r => r.json())
        .then(data => {
          box.innerHTML =
            `<b>IP:</b> ${data.ip || '-'}<br>` +
            `<b>Ülke:</b> ${data.country || '-'}<br>` +
            `<b>Şehir:</b> ${data.city || '-'}<br>` +
            `<b>ISP:</b> ${data.org || '-'}<br>` +
            `<b>Konum:</b> ${data.loc || '-'}<br>`;
        })
        .catch(()=>{box.textContent='Bilgiler alınamadı.'});
    }
    // Splash Screen (Giriş Ekranı)
    document.addEventListener('DOMContentLoaded', function() {
      document.body.style.overflow = "hidden";
      // Animasyonlu giriş
      const splashTitle = document.getElementById('splashTitle');
      if (splashTitle) splashTitle.style.opacity = 1;
      setTimeout(() => { document.getElementById('splashDesc').style.opacity = 1; }, 900);
      setTimeout(() => { document.getElementById('splashBtn').style.opacity = 1; }, 1500);

      var splashBtn = document.getElementById('splashBtn');
      if (splashBtn) {
        splashBtn.onclick = function() {
          var splash = document.getElementById('splashScreen');
          splash.style.opacity = 0;
          setTimeout(function() {
            splash.style.display = "none";
            document.body.style.overflow = ""; // Scroll'u aç
          }, 700);
        };
      }

      // Hakkımda kısmı animasyonlu sırayla gelsin
      function showAboutAnimated() {
        // Önce hepsini gizle
        document.getElementById('about-name').style.opacity = 0;
        document.getElementById('about-bio').style.opacity = 0;
        document.querySelectorAll('.timeline-content').forEach(el => el.style.opacity = 0);

        // Sırayla göster
        setTimeout(() => {
          document.getElementById('about-name').style.opacity = 1;
          document.getElementById('about-name').style.transition = "opacity 0.7s";
          setTimeout(() => {
            document.getElementById('about-bio').style.opacity = 1;
            document.getElementById('about-bio').style.transition = "opacity 0.7s";
            // Timeline kutuları sırayla gelsin
            const timelineItems = document.querySelectorAll('.timeline-content');
            timelineItems.forEach((el, i) => {
              setTimeout(() => {
                el.style.opacity = 1;
                el.style.transition = "opacity 0.7s";
              }, 700 * (i+1));
            });
          }, 700);
        }, 500);
      }

      // Hakkımda bölümü ilk açıldığında animasyon başlasın
      const aboutSection = document.getElementById('about');
      const observer = new IntersectionObserver(function(entries) {
        if (entries[0].isIntersecting) {
          showAboutAnimated();
          observer.disconnect();
        }
      }, { threshold: 0.3 });
      observer.observe(aboutSection);

      // Hakkımda kısmı
      document.getElementById('about-name').textContent = "Yakında...";
      document.getElementById('about-bio').textContent = "Yakında...";
    });
    function toggleTheme() {
      document.body.classList.toggle('light');
      const icon = document.getElementById('themeToggle').querySelector('i');
      if(document.body.classList.contains('light')) {
        icon.classList.remove('fa-moon');
        icon.classList.add('fa-sun');
        icon.style.color = '#f7c948';
        localStorage.setItem('theme', 'light');
      } else {
        icon.classList.remove('fa-sun');
        icon.classList.add('fa-moon');
        icon.style.color = '#7ee7f7';
        localStorage.setItem('theme', 'dark');
      }
    }
    document.getElementById('themeToggle').onclick = toggleTheme;
    // Dil toggle fonksiyonu
    function toggleLang() {
      const current = localStorage.getItem('lang') || 'tr';
      const next = current === 'tr' ? 'en' : 'tr';
      setLang(next);
      setLangBtnIcon(next);
    }
    document.getElementById('langToggle').onclick = toggleLang;
    function setLangBtnIcon(lang) {
      const btn = document.getElementById('langToggle');
      if(lang === 'tr') {
        btn.textContent = 'EN';
        btn.setAttribute('aria-label', 'Switch to English');
      } else {
        btn.textContent = 'TR';
        btn.setAttribute('aria-label', 'Türkçeye geç');
      }
    }
    // Ayarlar modalında seçili butonu vurgula
    function selectSettingBtn(btn, type) {
      document.querySelectorAll('.settings-options').forEach(function(group) {
        if(type==='lang' && group.previousElementSibling && group.previousElementSibling.textContent==='Dil') {
          group.querySelectorAll('button').forEach(b=>b.classList.remove('selected'));
        }
      });
      btn.classList.add('selected');
    }
    // Ayarlar modalını aç/kapat fonksiyonları
    function openSettings() {
      const lang = localStorage.getItem('lang') || 'tr';
      const t = translations[lang];
      document.getElementById('settingsModal').style.display = 'flex';
      // Modal başlığı ve etiketleri her açılışta güncelle
      document.querySelector('#settingsModal h2').textContent = t.settings;
      document.querySelectorAll('.settings-label').forEach(function(el){ el.textContent = t.language; });
    }
    function closeSettings() {
      document.getElementById('settingsModal').style.display = 'none';
    }

    // --- Sayfa yüklendiğinde ---
    document.addEventListener('DOMContentLoaded', function() {
      loadLang();
      updateVisitorCounter();
      animateWelcome();
      const theme = localStorage.getItem('theme');
      const icon = document.getElementById('themeToggle').querySelector('i');
      if(theme === 'light') {
        document.body.classList.add('light');
        icon.classList.remove('fa-moon');
        icon.classList.add('fa-sun');
        icon.style.color = '#f7c948';
      } else {
        document.body.classList.remove('light');
        icon.classList.remove('fa-sun');
        icon.classList.add('fa-moon');
        icon.style.color = '#7ee7f7';
      }
      // Lang butonu
      const lang = localStorage.getItem('lang') || 'tr';
      setLangBtnIcon(lang);
    });

    function showProjectModal(idx) {
      const lang = localStorage.getItem('lang') || 'tr';
      const proj = translations[lang].projects[idx];
      openModal(proj.modalTitle, proj.modalBody);
    }

    // Chat widget aç/kapat
    var chatBtn = document.getElementById('chatBtn');
    var chatWidget = document.getElementById('chatWidget');
    var chatClose = document.getElementById('chatClose');
    chatBtn.onclick = () => {
      chatWidget.style.display = 'flex';
      setTimeout(renderChatMessages, 100);
    };
    chatClose.onclick = () => { chatWidget.style.display = 'none'; };
    window.addEventListener('mousedown', function(e) {
      if (chatWidget.style.display === 'flex' && !chatWidget.contains(e.target) && e.target !== chatBtn) {
        chatWidget.style.display = 'none';
      }
    });
    // Admin paneli açıldığında sohbetleri göster
    var adminMsgPanel = document.getElementById('adminMsgPanel');
    var adminMsgClose = document.getElementById('adminMsgClose');
    adminMsgClose.onclick = () => { adminMsgPanel.style.display = 'none'; };
    // Chat header'a admin iconu ekle
    var chatHeader = document.getElementById('chatHeader');
    var adminIcon = document.createElement('i');
    adminIcon.className = 'fas fa-user-shield admin-icon';
    adminIcon.title = 'Gelen Mesajlar';
    adminIcon.onclick = function() {
      const pass = prompt('Yönetici mesaj paneline erişmek için şifre girin:');
      if (pass === 'anil123') {
        showAdminMsgPanel();
      } else if(pass !== null) {
        alert('Yanlış şifre!');
      }
    };
    chatHeader.appendChild(adminIcon);
    function showAdminMsgPanel() {
      renderAdminMsgList();
      adminMsgPanel.style.display = 'flex';
    }
    // Dil desteği
    function updateChatLang() {
      const lang = localStorage.getItem('lang') || 'tr';
      if (lang === 'en') {
        document.getElementById('chatHeaderTitle').textContent = 'Send Message';
        document.getElementById('chatStatus').textContent = 'Will reply if online';
        document.getElementById('chatName').placeholder = 'Your Name';
        document.getElementById('chatMsg').placeholder = 'Your Message';
        document.querySelector('#chatForm button[type="submit"]').textContent = 'Send';
        document.getElementById('chatSuccess').textContent = 'Your message has been sent! Thank you.';
        adminIcon.title = 'Incoming Messages';
        if (adminMsgPanel) adminMsgPanel.querySelector('#adminMsgHeader span').textContent = 'Incoming Messages';
      } else {
        document.getElementById('chatHeaderTitle').textContent = 'Mesaj Gönder';
        document.getElementById('chatStatus').textContent = 'Çevrimiçi ise cevap verir';
        document.getElementById('chatName').placeholder = 'Adınız';
        document.getElementById('chatMsg').placeholder = 'Mesajınız';
        document.querySelector('#chatForm button[type="submit"]').textContent = 'Gönder';
        document.getElementById('chatSuccess').textContent = 'Mesajınız gönderildi! Teşekkürler.';
        adminIcon.title = 'Gelen Mesajlar';
        if (adminMsgPanel) adminMsgPanel.querySelector('#adminMsgHeader span').textContent = 'Gelen Mesajlar';
      }
    }
    if (window.setLang) {
      const prevSetLang = setLang;
      setLang = function(lang) {
        prevSetLang(lang);
        updateChatLang();
      }
    }
    document.addEventListener('DOMContentLoaded', function() {
      updateChatLang();
      renderChatMessages();
    });

    // Her ziyaretçiye özel id ver
    function getUserId() {
      let id = localStorage.getItem('chatUserId');
      if (!id) {
        id = 'u_' + Math.random().toString(36).substr(2, 9);
        localStorage.setItem('chatUserId', id);
      }
      return id;
    }
    // Mesajları id'ye göre sakla
    function getAllChats() {
      return JSON.parse(localStorage.getItem('siteChats') || '{}');
    }
    function saveAllChats(obj) {
      localStorage.setItem('siteChats', JSON.stringify(obj));
    }
    function getMyChat() {
      const all = getAllChats();
      const id = getUserId();
      return all[id] || [];
    }
    function addMyMessage(name, msg) {
      const all = getAllChats();
      const id = getUserId();
      if (!all[id]) all[id] = [];
      all[id].push({from:'user', name, msg, date: new Date().toLocaleString('tr-TR', {hour12:false})});
      saveAllChats(all);
    }
    function addAdminReply(userId, msg) {
      const all = getAllChats();
      if (!all[userId]) all[userId] = [];
      all[userId].push({from:'admin', name:'Admin', msg, date: new Date().toLocaleString('tr-TR', {hour12:false})});
      saveAllChats(all);
    }
    // Chat widget'ta sohbeti göster
    function renderChatMessages() {
      var chatBox = document.getElementById('chatMessages');
      if (!chatBox) return;
      var chat = getMyChat();
      var html = '';
      var lastTime = null;
      for (var i = 0; i < chat.length; i++) {
        var m = chat[i];
        var showTime = false;
        var thisTime = new Date(m.date);
        if (i === 0 || i % 5 === 0) {
          showTime = true;
        } else if (lastTime) {
          var diff = (thisTime - lastTime) / 1000 / 60; // dakika
          if (diff > 20) showTime = true;
        }
        html += `<div class="chat-bubble ${m.from}">${m.msg}</div>`;
        if (showTime) {
          html += `<div class="chat-bubble time">${m.date}</div>`;
        }
        lastTime = thisTime;
      }
      chatBox.innerHTML = html;
      chatBox.scrollTop = chatBox.scrollHeight;
    }
    // Chat mesaj gönderme
    var chatForm = document.getElementById('chatForm');
    if (chatForm) {
      chatForm.onsubmit = function(e) {
        e.preventDefault();
        var nameInput = document.getElementById('chatName');
        var msgInput = document.getElementById('chatMsg');
        var storedName = getStoredUserName();
        var name = storedName && storedName.trim() !== '' ? storedName : (nameInput ? nameInput.value.trim() : '');
        var msg = msgInput ? msgInput.value.trim() : '';
        var lang = localStorage.getItem('lang') || 'tr';
        if (!name) {
          alert(lang === 'en' ? 'Please enter your name.' : 'Lütfen isminizi girin.');
          if (nameInput) {
            nameInput.style.display = '';
            nameInput.disabled = false;
            nameInput.focus();
          }
          return false;
        }
        if (!msg) {
          alert(lang === 'en' ? 'Please enter your message.' : 'Lütfen mesajınızı yazın.');
          if (msgInput) msgInput.focus();
          return false;
        }
        if (!storedName || storedName.trim() === '') setStoredUserName(name);
        if (typeof addMyMessage === 'function') addMyMessage(name, msg);
        if (typeof renderChatMessages === 'function') renderChatMessages();
        chatForm.reset();
        updateNameInputVisibility();
        var chatSuccess = document.getElementById('chatSuccess');
        if (chatSuccess) {
          chatSuccess.style.display = 'block';
          setTimeout(() => { chatSuccess.style.display = 'none'; }, 3000);
        }
        return false;
      };
    }
    document.addEventListener('DOMContentLoaded', updateNameInputVisibility);
    // Yeni sohbet başlatılırsa isim tekrar sorulsun
    function clearUserName() {
      localStorage.removeItem('chatUserName');
      updateNameInputVisibility();
    }
    // Sohbet silindiğinde isim de silinsin (kendi sohbeti silinirse)
    var origDeleteSelectedChat = deleteSelectedChat;
    deleteSelectedChat = function() {
      var myId = getUserId();
      if (selectedUserId === myId) clearUserName();
      origDeleteSelectedChat();
    };
    var origClearAllChats = clearAllChats;
    clearAllChats = function() {
      clearUserName();
      origClearAllChats();
    };
    // Admin panelinde tüm ziyaretçilerin sohbeti ve cevap kutusu
    function renderAdminMsgList() {
      const list = document.getElementById('adminMsgList');
      const all = getAllChats();
      const ids = Object.keys(all);
      if (ids.length === 0) {
        list.innerHTML = '<div style="color:#b3eaff;text-align:center;margin-top:18px;">Hiç mesaj yok.</div>';
        return;
      }
      list.innerHTML = ids.map(id => {
        const chat = all[id];
        const userName = chat.find(m=>m.from==='user')?.name || 'Ziyaretçi';
        return `
          <div class="admin-chat-block" data-id="${id}">
            <div class="admin-chat-title">${userName} <span style='color:#b3eaff;font-size:0.93em;'>(id: ${id})</span></div>
            <div class="admin-chat-messages">
              ${chat.map(m => `<div class="admin-chat-bubble ${m.from}">${m.msg}</div>`).join('')}
            </div>
            <form class="admin-chat-reply" onsubmit="return adminReply(event, '${id}')">
              <input type="text" placeholder="Cevabınız..." maxlength="300" required>
              <button type="submit">Gönder</button>
            </form>
          </div>
        `;
      }).join('');
    }
    window.adminReply = function(e, id) {
      e.preventDefault();
      const input = e.target.querySelector('input');
      const msg = input.value.trim();
      if (!msg) return false;
      addAdminReply(id, msg);
      input.value = '';
      renderAdminMsgList();
      if (id === getUserId()) renderChatMessages();
      return false;
    }
    // Gelişmiş admin chat paneli
    var selectedUserId = null;
    function renderAdminUsersList() {
      const usersList = document.getElementById('adminUsersList');
      const all = getAllChats();
      const ids = Object.keys(all);
      if (ids.length === 0) {
        usersList.innerHTML = '<div style="color:#b3eaff;text-align:center;margin-top:18px;">Hiç kullanıcı yok.</div>';
        document.getElementById('adminChatHeader').textContent = 'Sohbet';
        document.getElementById('adminChatMessages').innerHTML = '';
        document.getElementById('adminChatReplyForm').style.display = 'none';
        return;
      }
      usersList.innerHTML = ids.map(id => {
        const chat = all[id];
        const userName = chat.find(m=>m.from==='user')?.name || 'Ziyaretçi';
        return `<div class="admin-user-item${selectedUserId===id?' selected':''}" onclick="selectAdminUser('${id}')">${userName}<br><span style='font-size:0.85em;color:#b3eaff;'>${id}</span></div>`;
      }).join('');
    }
    window.selectAdminUser = function(id) {
      selectedUserId = id;
      renderAdminUsersList();
      renderAdminChatArea();
    }
    function renderAdminChatArea() {
      const all = getAllChats();
      const chat = all[selectedUserId] || [];
      const userName = chat.find(m=>m.from==='user')?.name || 'Ziyaretçi';
      document.getElementById('adminChatHeader').textContent = userName + ' (' + selectedUserId + ')';
      document.getElementById('adminChatMessages').innerHTML = chat.map(m => `<div class="admin-chat-bubble ${m.from}">${m.msg}</div><div class="chat-bubble time">${m.date}</div>`).join('');
      document.getElementById('adminChatMessages').scrollTop = document.getElementById('adminChatMessages').scrollHeight;
      document.getElementById('adminChatReplyForm').style.display = 'flex';
    }
    document.getElementById('adminChatReplyForm').onsubmit = function(e) {
      e.preventDefault();
      const input = document.getElementById('adminReplyInput');
      const msg = input.value.trim();
      if (!msg || !selectedUserId) return false;
      addAdminReply(selectedUserId, msg);
      input.value = '';
      renderAdminChatArea();
      return false;
    }
    // Panel açılınca kullanıcı listesi ve ilk kullanıcı seçili gelsin
    function showAdminMsgPanel() {
      const all = getAllChats();
      const ids = Object.keys(all);
      selectedUserId = ids[0] || null;
      renderAdminUsersList();
      if (selectedUserId) renderAdminChatArea();
      document.getElementById('adminMsgPanel').style.display = 'flex';
    }
    document.getElementById('adminMsgClose').onclick = () => { document.getElementById('adminMsgPanel').style.display = 'none'; };
    // Chat header'a admin iconu ekle (varsa tekrar ekleme)
    if (!document.querySelector('#chatHeader .admin-icon')) {
      var chatHeader = document.getElementById('chatHeader');
      var adminIcon = document.createElement('i');
      adminIcon.className = 'fas fa-user-shield admin-icon';
      adminIcon.title = 'Gelen Mesajlar';
      adminIcon.onclick = function() {
        const pass = prompt('Yönetici mesaj paneline erişmek için şifre girin:');
        if (pass === 'anil123') {
          showAdminMsgPanel();
        } else if(pass !== null) {
          alert('Yanlış şifre!');
        }
      };
      chatHeader.appendChild(adminIcon);
    }
    // Sohbet silme fonksiyonları
    function deleteSelectedChat() {
      if (!selectedUserId) return;
      if (!confirm('Bu sohbeti silmek istediğine emin misin?')) return;
      const all = getAllChats();
      delete all[selectedUserId];
      saveAllChats(all);
      // Sonraki kullanıcıyı seç
      const ids = Object.keys(all);
      selectedUserId = ids[0] || null;
      renderAdminUsersList();
      if (selectedUserId) renderAdminChatArea();
      else {
        document.getElementById('adminChatHeader').textContent = 'Sohbet';
        document.getElementById('adminChatMessages').innerHTML = '';
        document.getElementById('adminChatReplyForm').style.display = 'none';
      }
    }
    function clearAllChats() {
      if (!confirm('Tüm sohbetler silinecek. Emin misin?')) return;
      localStorage.removeItem('siteChats');
      selectedUserId = null;
      renderAdminUsersList();
      document.getElementById('adminChatHeader').textContent = 'Sohbet';
      document.getElementById('adminChatMessages').innerHTML = '';
      document.getElementById('adminChatReplyForm').style.display = 'none';
    }
    document.getElementById('deleteChatBtn').onclick = deleteSelectedChat;
    document.getElementById('clearAllChatsBtn').onclick = clearAllChats;
    // Okundu/okunmadı ve bildirim sistemi
    function getUnreadStatus() {
      return JSON.parse(localStorage.getItem('chatUnread') || '{}');
    }
    function setUnreadStatus(obj) {
      localStorage.setItem('chatUnread', JSON.stringify(obj));
    }
    // Ziyaretçi için: yeni admin cevabı bildirimi
    function checkUserNewMsgNotif() {
      const id = getUserId();
      const chat = getMyChat();
      const unread = getUnreadStatus();
      // Son admin mesajı okunmadıysa ve chat kapalıysa bildirim göster
      const last = chat.length ? chat[chat.length-1] : null;
      if (last && last.from === 'admin' && (!unread[id] || unread[id] < chat.length)) {
        if (chatWidget.style.display !== 'flex') {
          document.getElementById('chatNotifText').textContent = (localStorage.getItem('lang')==='en') ? 'You have a new message!' : 'Yeni mesajınız var!';
          document.getElementById('chatNotif').style.display = 'flex';
        }
      } else {
        document.getElementById('chatNotif').style.display = 'none';
      }
    }
    // Chat açılınca okundu olarak işaretle
    function markUserMsgsRead() {
      const id = getUserId();
      const chat = getMyChat();
      const unread = getUnreadStatus();
      unread[id] = chat.length;
      setUnreadStatus(unread);
      document.getElementById('chatNotif').style.display = 'none';
    }
    document.getElementById('chatNotif').onclick = function() {
      chatWidget.style.display = 'flex';
      setTimeout(renderChatMessages, 100);
      markUserMsgsRead();
    };
    // Admin için: yeni ziyaretçi mesajı bildirimi
    function checkAdminNewMsgNotif() {
      const all = getAllChats();
      const unread = getUnreadStatus();
      let hasNew = false;
      Object.keys(all).forEach(id => {
        const chat = all[id];
        const last = chat.length ? chat[chat.length-1] : null;
        if (last && last.from === 'user' && (!unread['admin_'+id] || unread['admin_'+id] < chat.length)) {
          hasNew = true;
        }
      });
      // Admin iconunda kırmızı nokta
      const icon = document.querySelector('#chatHeader .admin-icon');
      let badge = document.querySelector('.admin-icon-badge');
      if (icon) {
        if (hasNew) {
          if (!badge) {
            badge = document.createElement('span');
            badge.className = 'admin-icon-badge';
            icon.style.position = 'relative';
            icon.appendChild(badge);
          }
          badge.style.display = 'block';
        } else if (badge) {
          badge.style.display = 'none';
        }
      }
    }
    // Admin paneli açılınca okundu olarak işaretle
    function markAdminMsgsRead() {
      const all = getAllChats();
      const unread = getUnreadStatus();
      Object.keys(all).forEach(id => {
        const chat = all[id];
        unread['admin_'+id] = chat.length;
      });
      setUnreadStatus(unread);
      checkAdminNewMsgNotif();
    }
    // Kullanıcı listesinde yeni mesaj etiketi
    function renderAdminUsersList() {
      const usersList = document.getElementById('adminUsersList');
      const all = getAllChats();
      const unread = getUnreadStatus();
      const ids = Object.keys(all);
      if (ids.length === 0) {
        usersList.innerHTML = '<div style="color:#b3eaff;text-align:center;margin-top:18px;">Hiç kullanıcı yok.</div>';
        document.getElementById('adminChatHeader').textContent = 'Sohbet';
        document.getElementById('adminChatMessages').innerHTML = '';
        document.getElementById('adminChatReplyForm').style.display = 'none';
        return;
      }
      usersList.innerHTML = ids.map(id => {
        const chat = all[id];
        const userName = chat.find(m=>m.from==='user')?.name || 'Ziyaretçi';
        const last = chat.length ? chat[chat.length-1] : null;
        let badge = '';
        if (last && last.from === 'user' && (!unread['admin_'+id] || unread['admin_'+id] < chat.length)) {
          badge = '<span class="new-msg-badge">Yeni</span>';
        }
        return `<div class="admin-user-item${selectedUserId===id?' selected':''}" onclick="selectAdminUser('${id}')">${userName}${badge}<br><span style='font-size:0.85em;color:#b3eaff;'>${id}</span></div>`;
      }).join('');
    }
    // Sohbet güncellenince bildirimleri kontrol et
    function updateAllNotifs() {
      checkUserNewMsgNotif();
      checkAdminNewMsgNotif();
    }
    // Sohbet güncellenince çağır
    var origAddMyMessage = addMyMessage;
    addMyMessage = function(name, msg) {
      origAddMyMessage(name, msg);
      updateAllNotifs();
    };
    var origAddAdminReply = addAdminReply;
    addAdminReply = function(userId, msg) {
      origAddAdminReply(userId, msg);
      updateAllNotifs();
    };
    // Chat açılınca okundu işaretle
    chatBtn.onclick = () => {
      chatWidget.style.display = 'flex';
      setTimeout(renderChatMessages, 100);
      markUserMsgsRead();
    };
    // Admin paneli açılınca okundu işaretle
    function showAdminMsgPanel() {
      const all = getAllChats();
      const ids = Object.keys(all);
      selectedUserId = ids[0] || null;
      renderAdminUsersList();
      if (selectedUserId) renderAdminChatArea();
      document.getElementById('adminMsgPanel').style.display = 'flex';
      markAdminMsgsRead();
    }
    // Sayfa yüklenince ve sohbet güncellenince bildirimleri kontrol et
    setInterval(updateAllNotifs, 1200);
    document.addEventListener('DOMContentLoaded', updateAllNotifs);
    // İsim inputunu sadece ilk mesajda göster
    function getStoredUserName() {
      return localStorage.getItem('chatUserName') || '';
    }
    function setStoredUserName(name) {
      localStorage.setItem('chatUserName', name);
    }
    function updateNameInputVisibility() {
      var nameInput = document.getElementById('chatName');
      var stored = getStoredUserName();
      if (!nameInput) return;
      if (stored && stored.trim() !== '') {
        // İsim kaydedildiyse inputu DOM'dan kaldır
        nameInput.parentNode.removeChild(nameInput);
      } else {
        // İlk mesajda input görünür ve required olmalı
        nameInput.style.display = '';
        nameInput.value = '';
        nameInput.required = true;
        nameInput.disabled = false;
      }
    }
    updateNameInputVisibility();
    var chatForm = document.getElementById('chatForm');
    if (chatForm) {
      chatForm.onsubmit = function(e) {
        e.preventDefault();
        var nameInput = document.getElementById('chatName');
        var msgInput = document.getElementById('chatMsg');
        var storedName = getStoredUserName();
        var name = storedName && storedName.trim() !== '' ? storedName : (nameInput ? nameInput.value.trim() : '');
        var msg = msgInput ? msgInput.value.trim() : '';
        var lang = localStorage.getItem('lang') || 'tr';
        if (!name) {
          alert(lang === 'en' ? 'Please enter your name.' : 'Lütfen isminizi girin.');
          if (nameInput) {
            nameInput.style.display = '';
            nameInput.disabled = false;
            nameInput.focus();
          }
          return false;
        }
        if (!msg) {
          alert(lang === 'en' ? 'Please enter your message.' : 'Lütfen mesajınızı yazın.');
          if (msgInput) msgInput.focus();
          return false;
        }
        if (!storedName || storedName.trim() === '') setStoredUserName(name);
        if (typeof addMyMessage === 'function') addMyMessage(name, msg);
        if (typeof renderChatMessages === 'function') renderChatMessages();
        chatForm.reset();
        updateNameInputVisibility();
        var chatSuccess = document.getElementById('chatSuccess');
        if (chatSuccess) {
          chatSuccess.style.display = 'block';
          setTimeout(() => { chatSuccess.style.display = 'none'; }, 3000);
        }
        return false;
      };
    }
    // TR/EN butonu görünür olsun
    function setLangBtnIcon(lang) {
      const btn = document.getElementById('langToggle');
      if (!btn) return;
      if(lang === 'tr') {
        btn.textContent = 'EN';
        btn.setAttribute('aria-label', 'Switch to English');
      } else {
        btn.textContent = 'TR';
        btn.setAttribute('aria-label', 'Türkçeye geç');
      }
      btn.style.display = '';
    }
    setLangBtnIcon(localStorage.getItem('lang') || 'tr');
    const chatHeaderTitle = document.getElementById('chatHeaderTitle');
    if (chatHeaderTitle) chatHeaderTitle.textContent = 'Mesaj Gönder';

    function toggleNotifications(val) {
      localStorage.setItem('notifications', val ? 'on' : 'off');
      // Burada bildirimleri aç/kapatacak kodunu ekleyebilirsin
    }
  </script>
</body>
</html>
